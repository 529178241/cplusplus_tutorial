# 内存管理基础

## 程序内存模型

* 静态常量区
* 调用栈
* 堆

### 静态常量区

这块区域里的数据都是在编译期确定好的，它的大小是静态的，访问形式是只读的，这个非常好理解。

* 只读
* 大小固定
* 无法管理
* 可以利用其特性做一些特定的优化（对新手不友好，暂时不讲解）

### 调用栈

* 被动分配，被动回收
* 大小在运行期有一个动态调整的过程
* 大小有系统限制
* 底大顶小

1. 为什么变量有作用域？
2. 为什么不建议使用递归？

> 先进后出，轮流使用

> 不要在函数体内声明大块内存（数组，大型结构体）

### 堆

* 堆大小较大（甚至可以申请直到内存消耗完）
* 主动分配 主动回收

> 有借有还，再借不难

## 类型的内存模型

### 内置类型 & 数组 & struct & class

内置类型|大小|单位
-|-|-
char | 1 | 字节
short | 2 | 字节
int | 4 | 字节
float | 4 | 字节
int64_t | 8 | 字节
double | 8 | 字节

#### 数组

比较

```cpp
char arrSample[256];
int arrSample[64];
```

#### 拓展到 struct & class


### 调用栈动态内存模型演示

栈地址高低

### 再谈 union

## 指针

什么是指针？

为方便理解，可以这么解释，指针是表示某块数据在内存中的地址，地址为整形，它能表示的范围因平台不同而不同。

程序类型|指针位数|等同于
-|-|-
32位程序|32|uint32_t
64位程序|64|uint64_t

在同一平台上，一般而言，任何一个指针类型都可以退化为整数表示。